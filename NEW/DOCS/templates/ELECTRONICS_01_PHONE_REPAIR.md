# ВЕРТИКАЛЬ: Ремонт смартфонов

> Шаблон для обсуждения и финализации

---

## 1. БАЗОВАЯ ИНФОРМАЦИЯ

| Поле | Значение |
|------|----------|
| **Домен** | `electronics` |
| **Код вертикали** | `phone_repair` |
| **Название** | `Ремонт смартфонов` |
| **Описание** | `Сервисные центры, мастерские по ремонту` |

**Типичный бизнес:**
```
- Сервисные центры
- Частные мастера
- Точки в ТЦ "Ремонт телефонов"
- Авторизованные сервисы
```

---

## 2. VERTICAL CONTEXT TYPES

*В дополнение к domain context types: device, device_condition, price_expectation*

### Context Type 1: symptom

| Поле | Значение |
|------|----------|
| **Код** | `symptom` |
| **Название** | `Симптом/проблема` |
| **Описание** | `Что случилось с телефоном` |
| **Tier** | [x] small |

**Что извлекаем:**
```
Категория проблемы (экран, батарея, звук и т.д.)
Конкретный симптом (не включается, полосы на экране)
Обстоятельства (упал, залили водой)
```

**Возможные значения category:**
| Код | Описание | Примеры от клиента |
|-----|----------|-------------------|
| `screen` | Проблемы с экраном | "разбит экран", "не работает тачскрин", "полосы" |
| `battery` | Проблемы с батареей | "не держит зарядку", "быстро садится", "вздулась" |
| `charging` | Проблемы с зарядкой | "не заряжается", "сломано гнездо" |
| `sound` | Проблемы со звуком | "не слышно", "хрипит динамик", "микрофон не работает" |
| `camera` | Проблемы с камерой | "не работает камера", "мутные фото" |
| `power` | Не включается | "не включается", "завис на яблоке", "bootloop" |
| `software` | Программные проблемы | "глючит", "тормозит", "вирусы" |
| `water` | Залили жидкостью | "утопил", "залил водой", "попала вода" |
| `buttons` | Кнопки | "не работает кнопка", "залипает громкость" |
| `signal` | Связь | "не ловит сеть", "нет связи", "не видит симку" |
| `other` | Другое | — |

**Структура результата (JSON):**
```json
{
  "category": "string",
  "symptom": "string",
  "circumstances": "string | null",
  "when_started": "string | null"
}
```

---

### Context Type 2: repair_history

| Поле | Значение |
|------|----------|
| **Код** | `repair_history` |
| **Название** | `История ремонтов` |
| **Описание** | `Ремонтировали ли раньше` |
| **Tier** | [x] nano |

**Что извлекаем:**
```
Был ли телефон в ремонте раньше
Что ремонтировали
Где ремонтировали
```

**Возможные значения:**
| Код | Описание |
|-----|----------|
| `never` | Никогда не ремонтировали |
| `once` | Один раз |
| `multiple` | Несколько раз |
| `same_issue` | Та же проблема повторилась |

**Структура результата (JSON):**
```json
{
  "was_repaired": "boolean | null",
  "repair_count": "string | null",
  "previous_repairs": "string | null",
  "same_issue_before": "boolean | null"
}
```

---

### Context Type 3: warranty

| Поле | Значение |
|------|----------|
| **Код** | `warranty` |
| **Название** | `Гарантия` |
| **Описание** | `Есть ли гарантия` |
| **Tier** | [x] nano |

**Что извлекаем:**
```
На гарантии или нет
Откуда покупали (официально/серый)
Есть ли чек
```

**Возможные значения:**
| Код | Описание |
|-----|----------|
| `official` | Официальная гарантия |
| `store` | Гарантия магазина |
| `expired` | Гарантия истекла |
| `none` | Нет гарантии |

**Структура результата (JSON):**
```json
{
  "has_warranty": "boolean | null",
  "warranty_type": "string | null",
  "has_receipt": "boolean | null"
}
```

---

### Context Type 4: urgency

| Поле | Значение |
|------|----------|
| **Код** | `urgency_repair` |
| **Название** | `Срочность ремонта` |
| **Описание** | `Насколько срочно нужен ремонт` |
| **Tier** | [x] nano |

**Что извлекаем:**
```
Уровень срочности
Причина срочности (работа, поездка)
Готовность платить за срочность
```

**Возможные значения:**
| Код | Описание | Примеры |
|-----|----------|---------|
| `asap` | Срочно, сейчас | "срочно", "сегодня нужно", "очень срочно" |
| `soon` | В ближайшее время | "желательно быстро", "в течение дня" |
| `normal` | Без срочности | "когда будет готово", "не горит" |
| `flexible` | Когда угодно | "не спешу", "когда сможете" |

**Структура результата (JSON):**
```json
{
  "level": "string",
  "reason": "string | null",
  "pay_extra": "boolean | null"
}
```

---

### Context Type 5: purchase_info

| Поле | Значение |
|------|----------|
| **Код** | `purchase_info` |
| **Название** | `Информация о покупке` |
| **Описание** | `Где и когда купили телефон` |
| **Tier** | [x] nano |

**Что извлекаем:**
```
Когда купили (примерно)
Где купили
Новый или б/у при покупке
```

**Структура результата (JSON):**
```json
{
  "when_bought": "string | null",
  "where_bought": "string | null",
  "was_new": "boolean | null"
}
```

---

## 3. ВОРОНКА (FUNNEL)

| # | Код | Название | Цель этапа | Behavior | Собираем контекст |
|---|-----|----------|------------|----------|-------------------|
| 1 | `lead` | Первый контакт | Понять проблему | collect_info | device, symptom |
| 2 | `diagnostics` | Диагностика | Уточнить детали | collect_info | warranty, repair_history |
| 3 | `assessment` | Оценка | Предварительная цена | present_and_confirm | price_expectation |
| 4 | `presentation` | Презентация | Итоговая цена и сроки | present_and_confirm | urgency |
| 5 | `confirmation` | Подтверждение | Согласие клиента | terminal | — |

### Условия переходов

| Из этапа | В этап | Условие |
|----------|--------|---------|
| `lead` | `diagnostics` | Есть device + symptom |
| `diagnostics` | `assessment` | Есть все детали для оценки |
| `assessment` | `presentation` | Клиент хочет узнать финальную цену |
| `presentation` | `confirmation` | Клиент согласен |

---

## 4. ПРАВИЛА НОРМАЛИЗАЦИИ

### Нормализация для поля: symptom.category

| Что пишет клиент | Нормализуем в | Приоритет |
|------------------|---------------|-----------|
| `разбил` | `screen` | 100 |
| `разбился` | `screen` | 100 |
| `треснул` | `screen` | 100 |
| `экран` | `screen` | 90 |
| `дисплей` | `screen` | 90 |
| `тачскрин` | `screen` | 90 |
| `полосы` | `screen` | 80 |
| `батарея` | `battery` | 100 |
| `аккумулятор` | `battery` | 100 |
| `садится` | `battery` | 90 |
| `не держит` | `battery` | 80 |
| `вздулась` | `battery` | 100 |
| `не заряжается` | `charging` | 100 |
| `зарядка` | `charging` | 90 |
| `гнездо` | `charging` | 90 |
| `разъём` | `charging` | 90 |
| `не включается` | `power` | 100 |
| `не работает` | `power` | 80 |
| `завис` | `power` | 90 |
| `залил` | `water` | 100 |
| `утопил` | `water` | 100 |
| `вода` | `water` | 90 |
| `камера` | `camera` | 100 |
| `фото` | `camera` | 80 |
| `динамик` | `sound` | 100 |
| `звук` | `sound` | 100 |
| `микрофон` | `sound` | 100 |
| `не слышно` | `sound` | 90 |

### Нормализация для поля: urgency.level

| Что пишет клиент | Нормализуем в | Приоритет |
|------------------|---------------|-----------|
| `срочно` | `asap` | 100 |
| `очень срочно` | `asap` | 100 |
| `сегодня` | `asap` | 90 |
| `сейчас` | `asap` | 100 |
| `побыстрее` | `soon` | 100 |
| `желательно быстро` | `soon` | 90 |
| `не горит` | `normal` | 100 |
| `когда готово` | `normal` | 90 |
| `не спешу` | `flexible` | 100 |

---

## 5. ПРИМЕРЫ ДИАЛОГОВ

### Пример 1: Разбитый экран

**Клиент:**
```
Привет! Разбил айфон 13, экран весь в трещинах но работает. Сколько стоит замена?
```

**Извлечённый контекст:**
```json
{
  "device": {"brand": "Apple", "model": "iPhone 13"},
  "device_condition": {"condition": "poor", "details": "экран в трещинах, работает"},
  "symptom": {"category": "screen", "symptom": "трещины на экране", "circumstances": "разбил"}
}
```

**Этап воронки:** `lead` → `diagnostics`

---

### Пример 2: Не включается

**Клиент:**
```
Телефон не включается, самсунг s22. Вчера упал и всё. Срочно нужно, там все фотки
```

**Извлечённый контекст:**
```json
{
  "device": {"brand": "Samsung", "model": "Galaxy S22"},
  "symptom": {"category": "power", "symptom": "не включается", "circumstances": "упал", "when_started": "вчера"},
  "urgency_repair": {"level": "asap", "reason": "фотки на телефоне"}
}
```

**Этап воронки:** `lead`

---

### Пример 3: Залитый телефон

**Клиент:**
```
Сяоми редми ноут 10, залил кофе. На гарантии ещё вроде. Что делать?
```

**Извлечённый контекст:**
```json
{
  "device": {"brand": "Xiaomi", "model": "Redmi Note 10"},
  "symptom": {"category": "water", "symptom": "залит жидкостью", "circumstances": "кофе"},
  "warranty": {"has_warranty": true, "warranty_type": "unknown"}
}
```

**Этап воронки:** `lead` → `diagnostics`

---

## 6. ОСОБЕННОСТИ ВЕРТИКАЛИ

**Что важно учесть:**
```
- Залитые телефоны требуют срочной диагностики (коррозия)
- Гарантия не распространяется на механические повреждения и залитие
- Клиенты часто преуменьшают повреждения
- Цена может измениться после диагностики
```

**Частые вопросы клиентов:**
```
1. Сколько стоит замена экрана на [модель]?
2. Сколько времени займёт ремонт?
3. Есть гарантия на ремонт?
4. Можно оригинал или только копию?
5. Данные сохранятся?
```

**Что НЕ нужно извлекать:**
```
- Цвет телефона (для ремонта неважен обычно)
- Объём памяти (для большинства ремонтов неважен)
- Способ оплаты (на этапе первичного контакта)
```

---

## 7. ЗАМЕТКИ / ОБСУЖДЕНИЕ

```
Вопросы:
1. Добавлять ли "тип запчасти" (оригинал/копия/восстановленный)?
2. Нужен ли context type для "локации" (город/район)?
3. Как обрабатывать запросы на диагностику без симптома?

TODO:
- [ ] Интегрировать с прайс-листом для автооценки
- [ ] Добавить типовые сроки ремонта по категориям
```

---

## СТАТУС

- [x] Базовая информация
- [x] Context types (5 шт)
- [x] Воронка и переходы
- [x] Правила нормализации
- [x] Примеры диалогов
- [x] Особенности вертикали
- [ ] **ОЖИДАЕТ ПРОВЕРКИ**

**Заполнил:** Claude
**Дата:** 2026-01-04

---

*Вертикаль: phone_repair | Готов к обсуждению*
