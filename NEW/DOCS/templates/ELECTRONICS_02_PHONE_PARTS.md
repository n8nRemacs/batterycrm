# ВЕРТИКАЛЬ: Запчасти для смартфонов

> Шаблон для обсуждения и финализации

---

## 1. БАЗОВАЯ ИНФОРМАЦИЯ

| Поле | Значение |
|------|----------|
| **Домен** | `electronics` |
| **Код вертикали** | `phone_parts` |
| **Название** | `Запчасти для смартфонов` |
| **Описание** | `Продажа дисплеев, батарей, корпусов, шлейфов` |

**Типичный бизнес:**
```
- Оптовые поставщики запчастей
- Розничные магазины запчастей
- Онлайн-магазины
- Мастерские, продающие запчасти
```

---

## 2. VERTICAL CONTEXT TYPES

*В дополнение к domain context types: device, device_condition, price_expectation*

### Context Type 1: part_type

| Поле | Значение |
|------|----------|
| **Код** | `part_type` |
| **Название** | `Тип запчасти` |
| **Описание** | `Какая запчасть нужна` |
| **Tier** | [x] small |

**Что извлекаем:**
```
Категория запчасти (дисплей, батарея, корпус)
Конкретная запчасть (тачскрин, задняя крышка)
Для какой модели
```

**Возможные значения category:**
| Код | Описание | Примеры от клиента |
|-----|----------|-------------------|
| `display` | Дисплей, экран | "дисплей", "экран", "модуль" |
| `touchscreen` | Тачскрин отдельно | "тачскрин", "сенсор", "стекло" |
| `battery` | Аккумулятор | "батарея", "аккумулятор", "акб" |
| `back_cover` | Задняя крышка | "задняя крышка", "крышка", "спинка" |
| `frame` | Рамка, корпус | "рамка", "корпус", "средняя часть" |
| `charging_port` | Разъём зарядки | "гнездо зарядки", "разъём", "шлейф зарядки" |
| `flex` | Шлейфы | "шлейф", "межплатный", "кнопки" |
| `camera` | Камера | "камера", "основная камера", "фронталка" |
| `speaker` | Динамики | "динамик", "полифония", "разговорный" |
| `board` | Платы | "плата", "материнка", "контроллер" |
| `sim_tray` | Лоток SIM | "лоток симки", "сим трей" |
| `other` | Другое | — |

**Структура результата (JSON):**
```json
{
  "category": "string",
  "specific_part": "string | null",
  "for_model": "string | null"
}
```

---

### Context Type 2: part_quality

| Поле | Значение |
|------|----------|
| **Код** | `part_quality` |
| **Название** | `Качество запчасти` |
| **Описание** | `Оригинал, копия, восстановленная` |
| **Tier** | [x] nano |

**Что извлекаем:**
```
Какое качество нужно
Готов ли на альтернативу
Важна ли цена или качество
```

**Возможные значения:**
| Код | Описание | Примеры от клиента |
|-----|----------|-------------------|
| `original` | Оригинал | "оригинал", "родной", "заводской" |
| `oem` | OEM (аналог оригинала) | "OEM", "оригинальное качество" |
| `aaa` | Качественная копия | "AAA", "хорошая копия", "качественная" |
| `copy` | Копия | "копия", "дешёвая", "китай" |
| `refurbished` | Восстановленная | "восстановленный", "б/у оригинал", "снятый" |
| `any` | Любое | "любой", "что есть", "какой дешевле" |

**Структура результата (JSON):**
```json
{
  "quality": "string",
  "flexible": "boolean | null",
  "priority": "price | quality | null"
}
```

---

### Context Type 3: quantity

| Поле | Значение |
|------|----------|
| **Код** | `quantity` |
| **Название** | `Количество` |
| **Описание** | `Сколько штук нужно` |
| **Tier** | [x] nano |

**Что извлекаем:**
```
Количество штук
Опт или розница
Регулярность закупок
```

**Возможные значения order_type:**
| Код | Описание |
|-----|----------|
| `retail` | Розница (1-5 шт) |
| `small_wholesale` | Мелкий опт (5-20 шт) |
| `wholesale` | Опт (20+ шт) |

**Структура результата (JSON):**
```json
{
  "count": "number | null",
  "order_type": "string",
  "regular": "boolean | null"
}
```

---

### Context Type 4: buyer_type

| Поле | Значение |
|------|----------|
| **Код** | `buyer_type` |
| **Название** | `Тип покупателя` |
| **Описание** | `Мастер, конечный клиент, магазин` |
| **Tier** | [x] nano |

**Что извлекаем:**
```
Кто покупает
Для себя или на продажу
Нужна ли инструкция
```

**Возможные значения:**
| Код | Описание | Примеры |
|-----|----------|---------|
| `end_user` | Конечный пользователь | "для себя", "сам поменяю" |
| `repair_master` | Мастер по ремонту | "я мастер", "для ремонта", "сервис" |
| `reseller` | Перепродавец | "на продажу", "для магазина" |

**Структура результата (JSON):**
```json
{
  "type": "string",
  "needs_instruction": "boolean | null",
  "has_tools": "boolean | null"
}
```

---

### Context Type 5: delivery

| Поле | Значение |
|------|----------|
| **Код** | `delivery` |
| **Название** | `Доставка` |
| **Описание** | `Способ получения` |
| **Tier** | [x] nano |

**Что извлекаем:**
```
Способ получения (самовывоз, доставка)
Город
Срочность
```

**Возможные значения method:**
| Код | Описание |
|-----|----------|
| `pickup` | Самовывоз |
| `courier` | Курьер |
| `transport` | Транспортная компания |
| `post` | Почта |

**Структура результата (JSON):**
```json
{
  "method": "string | null",
  "city": "string | null",
  "urgent": "boolean | null"
}
```

---

## 3. ВОРОНКА (FUNNEL)

| # | Код | Название | Цель этапа | Behavior | Собираем контекст |
|---|-----|----------|------------|----------|-------------------|
| 1 | `lead` | Первый контакт | Понять что нужно | collect_info | device, part_type |
| 2 | `availability` | Наличие | Проверить наличие | await_action | part_quality |
| 3 | `details` | Детали | Уточнить детали | collect_info | quantity, buyer_type |
| 4 | `presentation` | Цена | Назвать цену | present_and_confirm | price_expectation |
| 5 | `delivery` | Доставка | Согласовать доставку | collect_info | delivery |
| 6 | `confirmation` | Подтверждение | Оформить заказ | terminal | — |

### Условия переходов

| Из этапа | В этап | Условие |
|----------|--------|---------|
| `lead` | `availability` | Есть device + part_type |
| `availability` | `details` | Товар в наличии |
| `details` | `presentation` | Есть quantity |
| `presentation` | `delivery` | Клиент согласен с ценой |
| `delivery` | `confirmation` | Выбран способ доставки |

---

## 4. ПРАВИЛА НОРМАЛИЗАЦИИ

### Нормализация для поля: part_type.category

| Что пишет клиент | Нормализуем в | Приоритет |
|------------------|---------------|-----------|
| `дисплей` | `display` | 100 |
| `экран` | `display` | 100 |
| `модуль` | `display` | 90 |
| `lcd` | `display` | 90 |
| `тачскрин` | `touchscreen` | 100 |
| `сенсор` | `touchscreen` | 90 |
| `стекло` | `touchscreen` | 80 |
| `батарея` | `battery` | 100 |
| `аккумулятор` | `battery` | 100 |
| `акб` | `battery` | 100 |
| `крышка` | `back_cover` | 100 |
| `задняя крышка` | `back_cover` | 100 |
| `спинка` | `back_cover` | 90 |
| `рамка` | `frame` | 100 |
| `корпус` | `frame` | 90 |
| `гнездо` | `charging_port` | 100 |
| `разъём` | `charging_port` | 90 |
| `зарядка` | `charging_port` | 80 |
| `шлейф` | `flex` | 100 |
| `камера` | `camera` | 100 |
| `фронталка` | `camera` | 90 |
| `динамик` | `speaker` | 100 |
| `полифония` | `speaker` | 90 |

### Нормализация для поля: part_quality.quality

| Что пишет клиент | Нормализуем в | Приоритет |
|------------------|---------------|-----------|
| `оригинал` | `original` | 100 |
| `родной` | `original` | 90 |
| `заводской` | `original` | 90 |
| `oem` | `oem` | 100 |
| `aaa` | `aaa` | 100 |
| `хорошая копия` | `aaa` | 90 |
| `копия` | `copy` | 100 |
| `китай` | `copy` | 90 |
| `дешёвая` | `copy` | 80 |
| `восстановленный` | `refurbished` | 100 |
| `б/у` | `refurbished` | 90 |
| `снятый` | `refurbished` | 90 |
| `любой` | `any` | 100 |
| `какой есть` | `any` | 90 |

---

## 5. ПРИМЕРЫ ДИАЛОГОВ

### Пример 1: Розничный покупатель

**Клиент:**
```
Добрый день! Нужен дисплей на iPhone 12, желательно оригинал. Есть в наличии?
```

**Извлечённый контекст:**
```json
{
  "device": {"brand": "Apple", "model": "iPhone 12"},
  "part_type": {"category": "display", "for_model": "iPhone 12"},
  "part_quality": {"quality": "original", "flexible": false}
}
```

**Этап воронки:** `lead` → `availability`

---

### Пример 2: Мастер, опт

**Клиент:**
```
Привет, я мастер, нужны батареи на редми ноут 8 про, штук 10. Что по цене?
```

**Извлечённый контекст:**
```json
{
  "device": {"brand": "Xiaomi", "model": "Redmi Note 8 Pro"},
  "part_type": {"category": "battery"},
  "quantity": {"count": 10, "order_type": "small_wholesale"},
  "buyer_type": {"type": "repair_master"}
}
```

**Этап воронки:** `lead` → `availability`

---

### Пример 3: С доставкой

**Клиент:**
```
Есть шлейф зарядки на самсунг A52? В Краснодар доставляете? Нужно побыстрее
```

**Извлечённый контекст:**
```json
{
  "device": {"brand": "Samsung", "model": "Galaxy A52"},
  "part_type": {"category": "charging_port", "specific_part": "шлейф зарядки"},
  "delivery": {"method": "courier", "city": "Краснодар", "urgent": true}
}
```

**Этап воронки:** `lead`

---

## 6. ОСОБЕННОСТИ ВЕРТИКАЛИ

**Что важно учесть:**
```
- Разные цены для розницы и опта
- Мастера часто берут регулярно — важно отслеживать
- Совместимость запчастей (одна запчасть на несколько моделей)
- Качество запчастей — частая тема споров
```

**Частые вопросы клиентов:**
```
1. Есть в наличии [запчасть] на [модель]?
2. Какое качество? Оригинал или копия?
3. Сколько стоит? Есть опт?
4. Как доставляете? Сколько по времени?
5. Есть гарантия на запчасть?
```

**Что НЕ нужно извлекать:**
```
- Цвет телефона (если не цветная запчасть типа крышки)
- История ремонтов
- Способ оплаты (на начальном этапе)
```

---

## 7. ЗАМЕТКИ / ОБСУЖДЕНИЕ

```
Вопросы:
1. Как обрабатывать запрос на несколько запчастей одновременно?
2. Нужен ли отдельный context type для "цвет запчасти"?
3. Как связывать с остатками на складе?

TODO:
- [ ] Интеграция с складскими остатками
- [ ] Автоматический расчёт оптовой цены
- [ ] Таблица совместимости запчастей
```

---

## СТАТУС

- [x] Базовая информация
- [x] Context types (5 шт)
- [x] Воронка и переходы
- [x] Правила нормализации
- [x] Примеры диалогов
- [x] Особенности вертикали
- [ ] **ОЖИДАЕТ ПРОВЕРКИ**

**Заполнил:** Claude
**Дата:** 2026-01-04

---

*Вертикаль: phone_parts | Готов к обсуждению*
