# Stop Session - 2025-12-25 (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Å–µ–≥–æ–¥–Ω—è

### 1. Avito Official API ‚Äî –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã credentials:
```
Client_id: MS0TjX2bwNcLapoX7YCc
Client_secret: QrhNXcvAzZexWOaFE99kMiRPDSE1hTZwkUYX4RFN
User ID: 157920214 (–†–µ–º–ê–∫—Å)
```

**Scopes –ø–æ–ª—É—á–µ–Ω—ã:**
- messenger:read ‚úÖ
- messenger:write ‚úÖ
- items:info, stats:read, user:read ‚úÖ

### 2. Avito API ‚Äî –ß—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ/–ø–ª–∞—Ç–Ω–æ

| –§—É–Ω–∫—Ü–∏—è | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | –ü–ª–∞—Ç–Ω–æ (402) |
|---------|:---------:|:------------:|
| OAuth —Ç–æ–∫–µ–Ω | ‚úÖ | |
| GET /chats (—Å–ø–∏—Å–æ–∫ + last_message) | ‚úÖ | |
| POST /webhook (–ø–æ–¥–ø–∏—Å–∫–∞) | ‚úÖ | |
| **–û—Ç–ø—Ä–∞–≤–∫–∞ webhooks –æ—Ç Avito** | | ‚ùå |
| GET /messages (–ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è) | | ‚ùå |
| POST /messages (–æ—Ç–ø—Ä–∞–≤–∫–∞) | | ‚ùå |

**–í—ã–≤–æ–¥:** Webhook –ø–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–æ Avito –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhooks –±–µ–∑ –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏.

### 3. –†–µ—à–µ–Ω–∏–µ ‚Äî Polling

–°–æ–∑–¥–∞–Ω workflow –¥–ª—è polling –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥:
```
NEW/MVP/MCP/mcp-avito-camoufox/n8n-avito-polling.json
```

–°—Ö–µ–º–∞:
```
Schedule (15 —Å–µ–∫) ‚Üí Get Token ‚Üí GET /chats?unread_only=true ‚Üí Parse ‚Üí Queue
```

### 4. n8n Workflows

| Workflow | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|--------|------------|
| ELO_In_Avito | ‚úÖ Active | Webhook (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏) |
| ELO_Avito_Polling | üìÑ JSON | –ù—É–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å |

### 5. mcp-avito-camoufox

- ‚úÖ –õ–æ–≥–∏–Ω —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ IP: 217.114.14.17 (—á–µ—Ä–µ–∑ iptables SNAT)
- ‚úÖ –°–µ—Å—Å–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- ‚ùå WebSocket –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è Avito
- ‚ùå Internal API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403

### 6. AVITO_RESEARCH.md ‚Äî –û–±–Ω–æ–≤–ª—ë–Ω

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Official API vs Camoufox
- –í—Å–µ endpoints —Å —Å—Ç–∞—Ç—É—Å–∞–º–∏
- Webhook —Ñ–æ—Ä–º–∞—Ç
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

---

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã/—Å–æ–∑–¥–∞–Ω—ã

```
NEW/MVP/MCP/mcp-avito-camoufox/
‚îú‚îÄ‚îÄ AVITO_RESEARCH.md          # –ü–æ–ª–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ n8n-avito-polling.json     # Workflow –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
‚îú‚îÄ‚îÄ avito_channel.py           # –î–æ–±–∞–≤–ª–µ–Ω _extract_hash_id()
‚îî‚îÄ‚îÄ server.py                  # –î–æ–±–∞–≤–ª–µ–Ω—ã debug endpoints
```

---

## –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

| –°–µ—Ä–≤–µ—Ä | IP | –°–µ—Ä–≤–∏—Å—ã |
|--------|-----|---------|
| Messenger | 155.212.221.189 (‚Üí 217.114.14.17) | mcp-avito-camoufox :8793 |
| n8n | 185.221.214.83 | n8n, PostgreSQL |

---

*–°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: 2025-12-25*
