# üöÄ –ü–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ, –ø–æ—ç—Ç–æ–º—É –≤—ã–ø–æ–ª–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Supabase Dashboard –ø–æ —à–∞–≥–∞–º.

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

–û—Ç–∫—Ä–æ–π **Supabase Dashboard**: https://supabase.n8nsrv.ru ‚Üí **SQL Editor** ‚Üí **New Query**

–í—ã–ø–æ–ª–Ω–∏ —Ñ–∞–π–ª—ã –ø–æ –ø–æ—Ä—è–¥–∫—É:

---

## –®–ê–ì 1: –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã issue_types

**–§–∞–π–ª**: `001_step1_drop_old_issue_types.sql`

```sql
DROP TABLE IF EXISTS issue_types CASCADE;
SELECT '–°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ issue_types —É–¥–∞–ª–µ–Ω–∞' as result;
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `"–°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ issue_types —É–¥–∞–ª–µ–Ω–∞"`

---

## –®–ê–ì 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã repair_categories

**–§–∞–π–ª**: `001_step2_create_repair_categories.sql`

–°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å SQL –∏–∑ —Ñ–∞–π–ª–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏.

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `"–¢–∞–±–ª–∏—Ü–∞ repair_categories —Å–æ–∑–¥–∞–Ω–∞"`

---

## –®–ê–ì 3: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã issue_types

**–§–∞–π–ª**: `001_step3_create_issue_types.sql`

–°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å SQL –∏–∑ —Ñ–∞–π–ª–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏.

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `"–¢–∞–±–ª–∏—Ü–∞ issue_types —Å–æ–∑–¥–∞–Ω–∞"`

---

## –®–ê–ì 4: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã appeal_devices

**–§–∞–π–ª**: `001_step4_create_appeal_devices.sql`

–°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å SQL –∏–∑ —Ñ–∞–π–ª–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏.

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `"–¢–∞–±–ª–∏—Ü–∞ appeal_devices —Å–æ–∑–¥–∞–Ω–∞"`

---

## –®–ê–ì 5: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã appeal_repairs

**–§–∞–π–ª**: `001_step5_create_appeal_repairs.sql`

–°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å SQL –∏–∑ —Ñ–∞–π–ª–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏.

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `"–¢–∞–±–ª–∏—Ü–∞ appeal_repairs —Å–æ–∑–¥–∞–Ω–∞"`

---

## –®–ê–ì 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã appeals

**–§–∞–π–ª**: `001_step6_update_appeals.sql`

–î–æ–±–∞–≤–ª—è–µ—Ç 4 –Ω–æ–≤—ã—Ö JSONB –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É appeals.

---

## –®–ê–ì 7: –°–æ–∑–¥–∞–Ω–∏–µ context_fields_config

**–§–∞–π–ª**: `001_step7_create_context_fields_config.sql`

---

## –®–ê–ì 8: –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

**–§–∞–π–ª**: `001_step8_test_data.sql`

–î–æ–±–∞–≤–ª—è–µ—Ç 7 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–µ–º–æ–Ω—Ç–∞ –∏ ~40 –ø—Ä–æ–±–ª–µ–º.

---

## –®–ê–ì 9: –§—É–Ω–∫—Ü–∏–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã

**–§–∞–π–ª**: `001_step9_triggers.sql`

---

## –®–ê–ì 10: VIEW –∏ –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª**: `001_step10_view_and_migration.sql`

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–∏ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å:

```sql
SELECT
  (SELECT COUNT(*) FROM repair_categories) as categories,
  (SELECT COUNT(*) FROM issue_types) as issues,
  (SELECT COUNT(*) FROM appeal_devices) as devices,
  (SELECT COUNT(*) FROM appeal_repairs) as repairs;
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- categories: 7
- issues: ~40
- devices: (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏–∑ —Å—Ç–∞—Ä—ã—Ö –∑–∞—è–≤–æ–∫)
- repairs: (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–º–æ–Ω—Ç–æ–≤ –∏–∑ —Å—Ç–∞—Ä—ã—Ö –∑–∞—è–≤–æ–∫)

---

**–°–æ–æ–±—â–∏ –º–Ω–µ –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—à—å –≤—Å–µ —à–∞–≥–∏!** üéØ
