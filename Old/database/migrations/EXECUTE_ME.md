# üöÄ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ 001

## –°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤–æ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

–ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –≤ Git (commit 98ac491).

## –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Supabase Dashboard (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ò—Å–ø–æ–ª—å–∑—É–π —Ñ–∞–π–ª `001_multi_device_architecture_SAFE.sql` - –æ–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—É—é —Ç–∞–±–ª–∏—Ü—É issue_types!

1. –û—Ç–∫—Ä–æ–π **Supabase Dashboard**: https://supabase.n8nsrv.ru
2. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏ **SQL Editor**
3. –ù–∞–∂–º–∏ **New Query** (–ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å)
4. –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `001_multi_device_architecture_SAFE.sql` –≤ VSCode
5. –°–∫–æ–ø–∏—Ä—É–π **–≤–µ—Å—å** SQL –∫–æ–¥ (Ctrl+A, Ctrl+C)
6. –í—Å—Ç–∞–≤—å –≤ SQL Editor (Ctrl+V)
7. –ù–∞–∂–º–∏ **Run** (–∏–ª–∏ Ctrl+Enter)

### –ß—Ç–æ —É–≤–∏–¥–∏—à—å –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```
NOTICE: ========================================
NOTICE: üöÄ –ú–ò–ì–†–ê–¶–ò–Ø 001: Multi-Device Architecture
NOTICE: ========================================
NOTICE: ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ appeal_devices
NOTICE: ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ repair_categories
NOTICE: ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ issue_types
NOTICE: ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ appeal_repairs
NOTICE: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ appeals (4 –Ω–æ–≤—ã—Ö –ø–æ–ª—è)
NOTICE: ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ context_fields_config
NOTICE: ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è repair_categories –∏ issue_types –¥–æ–±–∞–≤–ª–µ–Ω—ã
NOTICE: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–ª—è tenant_id: xxx
NOTICE: ‚úÖ –°–æ–∑–¥–∞–Ω–æ VIEW v_appeals_with_devices
NOTICE: –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞
NOTICE: ========================================
NOTICE: üéâ –ú–∏–≥—Ä–∞—Ü–∏—è Multi-Device Architecture –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
NOTICE: ========================================
NOTICE: –°–æ–∑–¥–∞–Ω–æ:
NOTICE: - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ repair_categories (7 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
NOTICE: - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ issue_types (~40 –ø—Ä–æ–±–ª–µ–º)
NOTICE: - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ appeal_devices
NOTICE: - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ appeal_repairs
NOTICE: - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ context_fields_config
NOTICE: - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ appeals (4 –Ω–æ–≤—ã—Ö –ø–æ–ª—è)
NOTICE: - ‚úÖ VIEW v_appeals_with_devices
NOTICE: - ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è updated_at
NOTICE: - ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
NOTICE: ========================================
NOTICE: –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –û–±–Ω–æ–≤–∏—Ç—å n8n –≤–æ—Ä–∫–µ—Ä—ã (AI Tools)
NOTICE: ========================================
```

## –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ n8n PostgreSQL Node

1. –û—Ç–∫—Ä–æ–π **n8n**: https://n8n.n8nsrv.ru
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π workflow `Backend JSON/DB Migration Runner.json`
3. –£–±–µ–¥–∏—Å—å —á—Ç–æ PostgreSQL Credential –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "Supabase PostgreSQL")
4. –ó–∞–ø—É—Å—Ç–∏ workflow –≤—Ä—É—á–Ω—É—é (Manual Trigger)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–í—ã–ø–æ–ª–Ω–∏ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å –≤ SQL Editor:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
SELECT table_name
FROM information_schema.tables
WHERE table_schema = 'public'
  AND table_name IN (
    'appeal_devices',
    'repair_categories',
    'issue_types',
    'appeal_repairs',
    'context_fields_config'
  );

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
SELECT
  (SELECT COUNT(*) FROM repair_categories) as categories_count,
  (SELECT COUNT(*) FROM issue_types) as issues_count,
  (SELECT COUNT(*) FROM context_fields_config) as config_fields_count;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –≤ appeals
SELECT column_name, data_type
FROM information_schema.columns
WHERE table_schema = 'public'
  AND table_name = 'appeals'
  AND column_name IN (
    'conversation_context',
    'context_completion_status',
    'conversation_focus',
    'last_greeting_at'
  );
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ 5 –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü –Ω–∞–π–¥–µ–Ω—ã
- ‚úÖ 7 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–µ–º–æ–Ω—Ç–∞
- ‚úÖ ~40 —Ç–∏–ø–æ–≤ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ 4 –ø–æ–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ 4 –Ω–æ–≤—ã—Ö –ø–æ–ª—è –≤ appeals

## üîÑ –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:

1. –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `001_rollback.sql`
2. –í—ã–ø–æ–ª–Ω–∏ –µ–≥–æ —á–µ—Ä–µ–∑ SQL Editor

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: –û—Ç–∫–∞—Ç —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü!

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–∏ –º–Ω–µ, –∏ —è:

1. –°–æ–∑–¥–∞–º AI Tools:
   - `Tool-RepairCategory` (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–µ–º–æ–Ω—Ç–∞)
   - `Tool-IssueType` (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã)
   - –û–±–Ω–æ–≤–ª—é `Tool-Model` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

2. –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—é `BAT AI Appeal Router` —Å –ª–æ–≥–∏–∫–æ–π —Ñ–æ–∫—É—Å–∞ –¥–∏–∞–ª–æ–≥–∞

3. –û–±–Ω–æ–≤–ª—é Android API endpoints

4. –û–±–Ω–æ–≤–ª—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

**–ì–æ—Ç–æ–≤–æ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é!** –ñ–¥—É —Ç–≤–æ–µ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞.
