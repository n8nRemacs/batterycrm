{
  "name": "API_Operator_Send_Promo",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "operator-send-promo",
        "options": {
          "allowedOrigins": "*"
        }
      },
      "id": "843f62d0-6be5-4a5e-816c-103be202fb1e",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -384,
        16
      ],
      "webhookId": "operator-send-promo"
    },
    {
      "parameters": {
        "jsCode": "const body = JSON.parse($input.item.json.body);\n\nreturn {\n  appeal_id: body.appeal_id || null,\n  telegram_id: body.telegram_id || null,\n  tenant_id: body.tenant_id || null\n};"
      },
      "id": "819ff6cb-669a-4a5c-a7bb-1c3ef071c503",
      "name": "Parse Params",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -160,
        16
      ]
    },
    {
      "parameters": {
        "workflowId": "={{ $vars.BAT_Promo_Sender }}",
        "options": {}
      },
      "id": "31c6701a-17f1-41b3-b67c-a9df826aba76",
      "name": "Call BAT_Promo_Sender",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.1,
      "position": [
        64,
        16
      ]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { \"success\": true, \"message\": \"Promo sending initiated\" } }}",
        "options": {}
      },
      "id": "6bc90778-ba88-40e9-bd85-ca51e575c9f3",
      "name": "Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        288,
        16
      ]
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Parse Params",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Params": {
      "main": [
        [
          {
            "node": "Call BAT_Promo_Sender",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call BAT_Promo_Sender": {
      "main": [
        [
          {
            "node": "Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null
}