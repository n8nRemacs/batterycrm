# ğŸ”‹ BatteryCRM

AI-powered service center management system with intelligent workflow automation.

## ğŸ“‹ Ğ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ

BatteryCRM - ÑÑ‚Ğ¾ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ CRM ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ»Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ñ‹Ñ… Ñ†ĞµĞ½Ñ‚Ñ€Ğ¾Ğ² Ğ¿Ğ¾ Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ñƒ Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¸ Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚Ğ°.

### âœ¨ ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:

- ğŸ¤– **AI-Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾Ğ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğ¹ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· GPT-4
- ğŸ“± **Multi-channel** - Telegram, VK, WhatsApp, Avito, Ğ²ĞµĞ±-Ñ„Ğ¾Ñ€Ğ¼Ñ‹
- ğŸ“² **Android Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ** - Ğ´Ğ»Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² Ñ push-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸ÑĞ¼Ğ¸ (FCM)
- ğŸ”„ **n8n workflows** - Ğ³Ğ¸Ğ±ĞºĞ°Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ²
- ğŸ’¾ **PostgreSQL + Supabase** - Ğ½Ğ°Ğ´ĞµĞ¶Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- ğŸ¯ **Multi-tenant** - Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ĞšĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹       â”‚
â”‚ Telegram/VK/WA  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  n8n Workflows      â”‚
    â”‚  - BAT IN Telegram  â”‚
    â”‚  - AI Router        â”‚
    â”‚  - FCM Sender       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PostgreSQL     â”‚
    â”‚   (Supabase)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Android App      â”‚
    â”‚  (ĞĞ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- Python 3.8+
- n8n v1.119.2
- PostgreSQL 14+
- Android Studio (Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ)

### Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

1. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞ¹ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹:
```bash
git clone https://github.com/YOUR_USERNAME/BatteryCRM.git
cd BatteryCRM
```

2. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:
```bash
pip install requests
```

3. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ n8n_manager.py Ñ Ñ‚Ğ²Ğ¾Ğ¸Ğ¼Ğ¸ credentials

4. Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞ¹ Ğ²Ğ¾Ñ€ĞºĞµÑ€Ñ‹ Ğ² n8n Ğ¸Ğ· Ğ¿Ğ°Ğ¿ĞºĞ¸ `Backend JSON/`

## ğŸ› ï¸ Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹

### n8n Manager

Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ¾Ñ€ĞºĞµÑ€Ğ°Ğ¼Ğ¸ Ñ‡ĞµÑ€ĞµĞ· API:

```bash
# Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ²Ğ¾Ñ€ĞºĞµÑ€Ğ¾Ğ²
python n8n_manager.py list

# Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ²Ğ¾Ñ€ĞºĞµÑ€
python n8n_manager.py get <WORKFLOW_ID>

# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²Ğ¾Ñ€ĞºĞµÑ€
python n8n_manager.py update <WORKFLOW_ID> workflows/file.json

# ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ¾Ñ€ĞºĞµÑ€
python n8n_manager.py activate <WORKFLOW_ID>
```

ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ: [README_N8N_MANAGER.md](README_N8N_MANAGER.md)

## ğŸ“š Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

- [Start.md](Start.md) - ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ¸ Ğ¿Ğ»Ğ°Ğ½ Ñ€Ğ°Ğ±Ğ¾Ñ‚
- [Eldoleado full.md](Eldoleado%20full.md) - Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
- [Database_Structure_BatteryCRM_COMPLETE.md](Database_Structure_BatteryCRM_COMPLETE.md) - ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ‘Ğ”
- [N8N_VERSION_INFO.md](N8N_VERSION_INFO.md) - Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ²ĞµÑ€ÑĞ¸Ğ¸ n8n

## ğŸ”§ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸

### Backend
- **n8n** v1.119.2 - workflow automation
- **PostgreSQL** 14 - Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ‘Ğ”
- **Supabase** - Ğ‘Ğ” Ñ…Ğ¾ÑÑ‚Ğ¸Ğ½Ğ³ + Auth
- **OpenAI GPT-4** - AI Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

### Mobile
- **Android** - Kotlin
- **Firebase FCM** - Push ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
- **Retrofit** - API ĞºĞ»Ğ¸ĞµĞ½Ñ‚
- **Material Design 3** - UI

### AI & ML
- **LangChain** - AI orchestration
- **OpenAI Embeddings** - Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
- **Postgres Chat Memory** - Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ²

## ğŸ“‚ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
BatteryCRM/
â”œâ”€â”€ app/                    # Android Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
â”œâ”€â”€ Backend JSON/           # n8n workflows
â”‚   â”œâ”€â”€ API Backend/       # API Ğ²Ğ¾Ñ€ĞºĞµÑ€Ñ‹
â”‚   â”œâ”€â”€ IN Workers/        # Ğ’Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ ĞºĞ°Ğ½Ğ°Ğ»Ñ‹
â”‚   â”œâ”€â”€ Out Workers/       # Ğ˜ÑÑ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ ĞºĞ°Ğ½Ğ°Ğ»Ñ‹
â”‚   â””â”€â”€ Tool/              # AI Tools
â”œâ”€â”€ workflows/             # Ğ¡ĞºĞ°Ñ‡Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ²Ğ¾Ñ€ĞºĞµÑ€Ñ‹ Ğ´Ğ»Ñ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
â”œâ”€â”€ n8n_manager.py         # ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ n8n workflows
â””â”€â”€ docs/                  # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
```

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

- Multi-tenant Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· `tenant_id`
- Session-based Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Android
- API keys Ğ´Ğ»Ñ n8n
- Encrypted FCM tokens
- SQL injection protection

## ğŸ“Š Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

37 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ:
- `clients` - ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹
- `appeals` - Ğ¾Ğ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ
- `messages_history` - Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
- `operators` - Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹
- `operator_devices` - ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²
- `tenants` - Ğ°Ñ€ĞµĞ½Ğ´Ğ°Ñ‚Ğ¾Ñ€Ñ‹ (multi-tenant)

ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°: [Database_Structure_BatteryCRM_COMPLETE.md](Database_Structure_BatteryCRM_COMPLETE.md)

## ğŸ¤ Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

### Version Control Ğ´Ğ»Ñ n8n workflows

```bash
# 1. Ğ¡ĞºĞ°Ñ‡Ğ°Ğ¹ Ğ²Ğ¾Ñ€ĞºĞµÑ€
python n8n_manager.py get pmDPBdREgE5wf1Cn

# 2. Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞ¹ workflows/Ñ„Ğ°Ğ¹Ğ».json

# 3. Commit Ğ² Git
git add workflows/
git commit -m "Update workflow: Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ"
git push

# 4. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸ Ğ² n8n
python n8n_manager.py update pmDPBdREgE5wf1Cn workflows/Ñ„Ğ°Ğ¹Ğ».json
```

### Ğ’ĞµÑ‚ĞºĞ¸

- `main` - production
- `develop` - Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
- `feature/*` - Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ„Ğ¸Ñ‡Ğ¸

## ğŸ“ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

Proprietary - Ğ²ÑĞµ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ·Ğ°Ñ‰Ğ¸Ñ‰ĞµĞ½Ñ‹

## ğŸ‘¤ ĞĞ²Ñ‚Ğ¾Ñ€

BatteryCRM Development Team

---

âš¡ Powered by AI, built with â¤ï¸
