# BatteryCRM - –ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–í–µ—Ä—Å–∏—è:** 2.0
**–î–∞—Ç–∞:** 2025-11-23
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (100% –≥–æ—Ç–æ–≤–æ)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç—ã

### 1. [01_SYSTEM_OVERVIEW.md](01_SYSTEM_OVERVIEW.md) (679 —Å—Ç—Ä–æ–∫)
**–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã BatteryCRM**
- –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Event-Driven, Microservices, Multi-Tenant)
- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (n8n, PostgreSQL, Android, Desktop, FCM)
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ (–≤—Å–µ 17)
- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 2. [02_DATABASE_SCHEMA_EXTENDED.md](02_DATABASE_SCHEMA_EXTENDED.md) (1418 —Å—Ç—Ä–æ–∫)
**–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
- **50 —Ç–∞–±–ª–∏—Ü:** 37 existing + 13 new
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –º—É–ª—å—Ç–∏–∑–∞—è–≤–æ–∫, –ø—Ä–æ–º–æ, –ø—Ä–∞–π—Å–æ–≤, AI, CRM sync, TTL
- –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ —Å—Ç–∞—Ä–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 3. [03_WORKFLOWS_COMPLETE.md](03_WORKFLOWS_COMPLETE.md) (1737 —Å—Ç—Ä–æ–∫)
**–ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è n8n workflows**
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
- BAT Message Router, Appeal Router, Universal Batcher
- BAT IN/OUT workflows (WhatsApp, Telegram, VK, Avito, Instagram)
- AI Tools (4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π)
- –ù–æ–≤—ã–µ workflows: Promo, Price, CRM Sync, QR, Voice, Remarketing, Archiver
- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ workflows (FCM, Error Handler, Health Check)

### 4. [04_API_SPECIFICATION.md](04_API_SPECIFICATION.md) (1328 —Å—Ç—Ä–æ–∫)
**REST API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è**
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è JWT (login, refresh, logout)
- Endpoints –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (11 endpoints)
  - –ó–∞—è–≤–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏—è, –º—É–ª—å—Ç–∏–∑–∞—è–≤–∫–∏, –≤–æ—Ä–æ–Ω–∫–∞
  - –†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏, QR-–∫–æ–¥—ã, –ø—Ä–æ–º–æ-–º–∞—Ç–µ—Ä–∏–∞–ª—ã
- Endpoints –¥–ª—è Android (5 endpoints)
  - –ì–æ–ª–æ—Å–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã, —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è, –∑–≤–æ–Ω–∫–∏, –º–µ–¥–∏–∞
- Endpoints –¥–ª—è workflows (3 endpoints)
- Endpoints –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (3 endpoints)
- –ö–æ–¥—ã –æ—à–∏–±–æ–∫, Rate limiting, –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, Webhooks

### 5. [05_ANDROID_APP_SPEC.md](05_ANDROID_APP_SPEC.md) (1364 —Å—Ç—Ä–æ–∫–∏)
**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Clean Architecture + MVVM)
- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (Kotlin, Jetpack Compose, Material 3)
- 8 —ç–∫—Ä–∞–Ω–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞)
- **–ì–æ–ª–æ—Å–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞** (Android SpeechRecognizer + AI)
- **–ó–∞–ø–∏—Å—å —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤** (InCallService API)
- **QR-—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** (CameraX + ML Kit)
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (FCM)
- Multi-device sessions (1 mobile + 1 desktop)
- –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º (Room Database)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (DataStore, SSL Pinning)

### 6. [06_DESKTOP_APP_SPEC.md](06_DESKTOP_APP_SPEC.md) (1114 —Å—Ç—Ä–æ–∫)
**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è Desktop-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Electron + React + TypeScript)
- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (Ant Design, Redux Toolkit)
- 7 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (—Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞)
  - Dashboard, Appeals, Analytics, Operators, Admin Panel
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –¥–∞—à–±–æ—Ä–¥—ã (–≥—Ä–∞—Ñ–∏–∫–∏, –≤–æ—Ä–æ–Ω–∫–∞, UTM)
- –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤)
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏, –ø—Ä–∞–π—Å–∞–º–∏, –ø—Ä–æ–º–æ-–º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏
- –≠–∫—Å–ø–æ—Ä—Ç (CSV, Excel, PDF)
- Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (WebSocket)
- Electron —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ (auto-updater)

### 7. [07_INTEGRATIONS.md](07_INTEGRATIONS.md) (1210 —Å—Ç—Ä–æ–∫)
**–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π**
- **–ö–∞–Ω–∞–ª—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (6):**
  - WhatsApp Business API
  - Telegram Bot API
  - VK API
  - Avito Messenger API
  - Instagram Direct Messages (NEW)
- **CRM —Å–∏—Å—Ç–µ–º—ã (2):**
  - LiveSklad (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
  - RemOnline (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- **–†–µ–∫–ª–∞–º–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (3):**
  - –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç, VK Ads, Google Ads
- **AI —Å–µ—Ä–≤–∏—Å—ã:**
  - Claude AI (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞)
  - OpenAI Whisper (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è)
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Firebase FCM)
- –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤ (AWS S3 / Supabase Storage)

### 8. [08_DEPLOYMENT_GUIDE.md](08_DEPLOYMENT_GUIDE.md) (1028 —Å—Ç—Ä–æ–∫)
**–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é**
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É (dev/production/cloud)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL (–Ω–∞—Ç–∏–≤–Ω–∞—è + Docker)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ n8n (Docker + npm)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx + SSL (Let's Encrypt)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ workflows (–∏–º–ø–æ—Ä—Ç 23 workflows, credentials)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (webhooks –¥–ª—è –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤)
- –î–µ–ø–ª–æ–π Android APK (build, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ)
- –î–µ–ø–ª–æ–π Desktop –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Windows/macOS/Linux)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus + Grafana)
- –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (PostgreSQL backup)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è (n8n, workflows, –ë–î –º–∏–≥—Ä–∞—Ü–∏–∏)
- Troubleshooting
- Checklist –¥–ª—è –¥–µ–ø–ª–æ—è

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

- **–í—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** 8
- **–û–±—â–∏–π –æ–±—ä—ë–º:** 9878 —Å—Ç—Ä–æ–∫
- **–†–∞–∑–º–µ—Ä:** 314 KB
- **–°—Ç–∞—Ç—É—Å:** 100% –≥–æ—Ç–æ–≤–æ ‚úÖ

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:**
- [Start.md](../../Start.md) ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã
- [PROJECT_COMPARISON_ANALYSIS.md](../../PROJECT_COMPARISON_ANALYSIS.md) ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑—Ä—ã–≤–∞ (57% ‚Üí 100%)
- [PROJECT_GAP_ANALYSIS_QUICK.md](../../PROJECT_GAP_ANALYSIS_QUICK.md) ‚Äî –±—ã—Å—Ç—Ä–∞—è —Å–≤–æ–¥–∫–∞
- [system_functionality_extended.md](../../system_functionality_extended.md) ‚Äî —Ü–µ–ª–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

**–í –∞—Ä—Ö–∏–≤–µ:**
- [docs/archive/](../archive/) ‚Äî —Å—Ç–∞—Ä—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è (–¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏)

---

## üìÖ –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### 2025-11-23
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –≤—Å–µ 8 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∞ 100%

### 2025-11-23 (—Ä–∞–Ω–µ–µ)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ docs/current –∏ docs/archive
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –ø–µ—Ä–≤—ã–µ 3 –¥–æ–∫—É–º–µ–Ω—Ç–∞ (SYSTEM_OVERVIEW, DATABASE_SCHEMA, WORKFLOWS)
- ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –≤ archive

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

**–≠–¢–ê–ü 1: Backend Foundation** (4-6 –Ω–µ–¥–µ–ª—å)
1. –°–æ–∑–¥–∞—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è 13 –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ dev –ë–î
3. –ú–∏–≥—Ä–∞—Ü–∏—è –≤–æ—Ä–æ–Ω–∫–∏ (5‚Üí9 —ç—Ç–∞–ø–æ–≤)
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Multi-Appeal API
5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Promo Materials API
6. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Pricing Engine API
7. –û–±–Ω–æ–≤–∏—Ç—å AI –æ–±—Ä–∞–±–æ—Ç–∫—É (Multi-Entity Extractor)
8. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å QR –≥–µ–Ω–µ—Ä–∞—Ü–∏—é

**–≠–¢–ê–ü 2: Integrations** (3-4 –Ω–µ–¥–µ–ª–∏)
1. Instagram Integration
2. LiveSklad Sync
3. RemOnline Sync
4. TTL Policies

**–≠–¢–ê–ü 3: Android —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª** (6-8 –Ω–µ–¥–µ–ª—å)
1. –ì–æ–ª–æ—Å–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã (SpeechRecognizer + AI)
2. –ó–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–æ–≤ (InCallService)
3. QR-—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (CameraX)
4. –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞
5. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π
6. –†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏

**–≠–¢–ê–ü 4: Desktop –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (4-6 –Ω–µ–¥–µ–ª—å)
1. Build –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
2. –í—Å–µ —ç–∫—Ä–∞–Ω—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
3. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –¥–∞—à–±–æ—Ä–¥—ã
4. –ê–¥–º–∏–Ω–∫–∞

**–≠–¢–ê–ü 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** (2-3 –Ω–µ–¥–µ–ª–∏)

---

**–û–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 5-7 –º–µ—Å—è—Ü–µ–≤ (20-27 –Ω–µ–¥–µ–ª—å)
