# –°–∏—Å—Ç–µ–º–∞ Enrichment (–û–±–æ–≥–∞—â–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤)

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ enrichment –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã. –¶–µ–ª—å ‚Äî –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º—É–º –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –±–æ–ª—å—à–µ —Å–ø–æ—Å–æ–±–æ–≤ —Å–≤—è–∑–∏ –∏ –ª—É—á—à–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏—è—Ö.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      ENRICHMENT SYSTEM                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ Contacts ‚îÇ    ‚îÇCreatives ‚îÇ    ‚îÇ A/B Tests‚îÇ    ‚îÇ Analytics‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  Store   ‚îÇ    ‚îÇ  Engine  ‚îÇ    ‚îÇ  Engine  ‚îÇ    ‚îÇ  Engine  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ       ‚îÇ               ‚îÇ               ‚îÇ               ‚îÇ         ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îÇ                           ‚îÇ                                     ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îÇ
‚îÇ                    ‚îÇ   Actions   ‚îÇ                              ‚îÇ
‚îÇ                    ‚îÇ   Router    ‚îÇ                              ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îÇ
‚îÇ                           ‚îÇ                                     ‚îÇ
‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ       ‚îÇ                   ‚îÇ                   ‚îÇ                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ  ‚îÇ  Text   ‚îÇ        ‚îÇ  Links  ‚îÇ        ‚îÇ  Forms  ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ Messages‚îÇ        ‚îÇ Tracker ‚îÇ        ‚îÇ Handler ‚îÇ             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¢–∞–±–ª–∏—Ü—ã PostgreSQL:

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------------|
| `contacts` | –í—Å–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã (phone, telegram, whatsapp, email, vk) |
| `client_contacts` | –°–≤—è–∑—å –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ (M:N) |
| `enrichment_actions` | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã |
| `creatives` | –®–∞–±–ª–æ–Ω—ã —Ç–µ–∫—Å—Ç–æ–≤, —Å—Å—ã–ª–æ–∫, —Ñ–æ—Ä–º |
| `ab_tests` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è A/B/Z —Ç–µ—Å—Ç–æ–≤ |
| `ab_test_results` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∫–∞–∑–æ–≤ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–π |
| `creative_usage_log` | –î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ |

### –£–∑–ª—ã Neo4j:

| –£–∑–µ–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `(:Contact)` | –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| `(:Creative)` | –ö—Ä–µ–∞—Ç–∏–≤—ã |
| `(:ABTest)` | A/B —Ç–µ—Å—Ç—ã |
| `(:EnrichmentAction)` | –î–µ–π—Å—Ç–≤–∏—è –æ–±–æ–≥–∞—â–µ–Ω–∏—è |

### –°–≤—è–∑–∏ Neo4j:

| –°–≤—è–∑—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `(:Client)-[:HAS_CONTACT]->(:Contact)` | –ö–ª–∏–µ–Ω—Ç –≤–ª–∞–¥–µ–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–º |
| `(:Contact)-[:DISCOVERED_VIA]->(:Touchpoint)` | –ö–∞–∫ —É–∑–Ω–∞–ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç |
| `(:Contact)-[:VERIFIED_BY]->(:Touchpoint)` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ |
| `(:EnrichmentAction)-[:USED_CREATIVE]->(:Creative)` | –ö–∞–∫–æ–π –∫—Ä–µ–∞—Ç–∏–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω |
| `(:EnrichmentAction)-[:RESULTED_IN]->(:Contact)` | –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç |
| `(:Creative)-[:BELONGS_TO_TEST]->(:ABTest)` | –ö—Ä–µ–∞—Ç–∏–≤ –≤ —Ç–µ—Å—Ç–µ |

---

## –¢–∏–ø—ã –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

| –¢–∏–ø | –§–æ—Ä–º–∞—Ç value | –ö–∞–∫ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|-----|--------------|-------------------|-----------|
| `phone` | `+79123456789` | –£–±–∏—Ä–∞–µ–º –≤—Å—ë –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä, –¥–æ–±–∞–≤–ª—è–µ–º +7 | 1 (–≤—ã—Å—à–∏–π) |
| `whatsapp` | `+79123456789` | –¢–æ—Ç –∂–µ —Ç–µ–ª–µ—Ñ–æ–Ω | 2 |
| `telegram` | `username` | –£–±–∏—Ä–∞–µ–º @, lowercase | 3 |
| `email` | `email@domain.com` | Lowercase | 4 |
| `vk` | `123456789` | VK user ID | 5 |
| `avito` | `user_abc123` | Avito user ID | 6 |

---

## –ú–µ—Ö–∞–Ω–∏–∑–º—ã –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ

| –ö–∞–Ω–∞–ª | –ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
|-------|---------------------------|
| WhatsApp | –¢–µ–ª–µ—Ñ–æ–Ω (–æ—Å–Ω–æ–≤–∞ WA), –∏–º—è –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è |
| Telegram | Username, user_id, –∏–Ω–æ–≥–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω |
| VK | VK ID, –∏–º—è |
| Avito | Avito user ID |
| –ó–≤–æ–Ω–æ–∫ | Caller ID (—Ç–µ–ª–µ—Ñ–æ–Ω) |
| –§–æ—Ä–º–∞ –Ω–∞ —Å–∞–π—Ç–µ | –í—Å–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è + fingerprint |

### 2. –ê–∫—Ç–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å (—á–µ—Ä–µ–∑ –∫—Ä–µ–∞—Ç–∏–≤—ã)

**–¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç —Å –ø—Ä–æ—Å—å–±–æ–π –¥–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç

**Short links** ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ä–º—É/—Å—Ç—Ä–∞–Ω–∏—Ü—É, –≥–¥–µ –∫–ª–∏–µ–Ω—Ç –æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ

**–ó–≤–æ–Ω–æ–∫** ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä –∑–≤–æ–Ω–∏—Ç –∏ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç

### 3. –ö–æ—Å–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ (fingerprint)

–ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ –ª—é–±–æ–π –Ω–∞—à–µ–π —Å—Å—ã–ª–∫–µ:
1. –°–æ–±–∏—Ä–∞–µ–º fingerprint –±—Ä–∞—É–∑–µ—Ä–∞
2. –°–≤—è–∑—ã–≤–∞–µ–º —Å –∫–ª–∏–µ–Ω—Ç–æ–º —á–µ—Ä–µ–∑ short_link
3. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤–∏–∑–∏—Ç–∞—Ö ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ–º

---

## –ö—Ä–µ–∞—Ç–∏–≤—ã

### –¢–∏–ø—ã –∫—Ä–µ–∞—Ç–∏–≤–æ–≤:

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |
|-----|----------|---------------------|
| `text` | –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ | –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —á–∞—Ç Avito/Telegram |
| `link` | –°—Å—ã–ª–∫–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ | Short link –Ω–∞ —Ñ–æ—Ä–º—É |
| `form` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º—ã | –ö–∞–∫–∏–µ –ø–æ–ª—è –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å |
| `page` | –õ–µ–Ω–¥–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ | –í—ã–±–æ—Ä –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ |
| `script` | –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ | –ü—Ä–∏ –∑–≤–æ–Ω–∫–µ |

### –¶–µ–ª–∏ –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ (purpose):

| Purpose | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `get_phone` | –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω |
| `get_whatsapp` | –ü–æ–ª—É—á–∏—Ç—å WhatsApp (—á–∞—Å—Ç–æ = —Ç–µ–ª–µ—Ñ–æ–Ω) |
| `get_telegram` | –ü–æ–ª—É—á–∏—Ç—å Telegram username |
| `get_email` | –ü–æ–ª—É—á–∏—Ç—å email |
| `get_fingerprint` | –ó–∞—Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ |

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∫—Ä–µ–∞—Ç–∏–≤–∞—Ö:

```
{{client_name}}     ‚Äî –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞
{{device}}          ‚Äî —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–∑ –∑–∞—è–≤–∫–∏
{{appeal_id}}       ‚Äî –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏
{{short_link}}      ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ—Ä–æ—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞
{{service_address}} ‚Äî –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–∏—Å–∞
{{operator_name}}   ‚Äî –∏–º—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
```

---

## A/B/Z –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß—Ç–æ —Ç–∞–∫–æ–µ A/B/Z:

- **A, B, C...** ‚Äî —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
- **Z** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞ (—Å—Ç–∞—Ä—ã–π/–±–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –°–æ–∑–¥–∞—ë—Ç—Å—è —Ç–µ—Å—Ç —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç—Ä–∞—Ñ–∏–∫–∞
2. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–∫–∞–∑–∞—Ç—å –∫—Ä–µ–∞—Ç–∏–≤ ‚Äî –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤–∞—Ä–∏–∞–Ω—Ç
3. –§–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è exposure (–ø–æ–∫–∞–∑)
4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è conversion (–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–∏)
5. –ü–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ ‚Äî –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—å

### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞:

```json
{
  "name": "–¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ Avito",
  "purpose": "get_phone",
  "variants": {
    "A": {"creative_id": "friendly-ask"},
    "B": {"creative_id": "direct-ask"},
    "Z": {"creative_id": "no-ask"}
  },
  "traffic_split": {"A": 45, "B": 45, "Z": 10},
  "min_sample_size": 100,
  "confidence_level": 0.95
}
```

### –ú–µ—Ç—Ä–∏–∫–∏:

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| Exposures | –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–∫–∞–∑–∞–ª–∏ |
| Conversions | –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–ª—É—á–∏–ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç |
| Conversion Rate | conversions / exposures |
| Statistical Significance | –î–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ |

---

## –ü—Ä–∏–º–µ—Ä—ã –∫—Ä–µ–∞—Ç–∏–≤–æ–≤

### 1. –¢–µ–∫—Å—Ç–æ–≤—ã–µ (–¥–ª—è —á–∞—Ç–æ–≤)

#### get_phone ‚Äî –ê–≤–∏—Ç–æ (–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π)
```
code: ask_phone_avito_friendly
type: text
purpose: get_phone
channels: ["avito"]
content: "–ü–æ–¥—Å–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—é –∞–¥—Ä–µ—Å –∏ —Å—Ö–µ–º—É –ø—Ä–æ–µ–∑–¥–∞ –≤ SMS üìç"
```

#### get_phone ‚Äî –ê–≤–∏—Ç–æ (–¥–µ–ª–æ–≤–æ–π)
```
code: ask_phone_avito_business
type: text
purpose: get_phone
channels: ["avito"]
content: "–î–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —É–∫–∞–∂–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞."
```

#### get_phone ‚Äî –ê–≤–∏—Ç–æ (—á–µ—Ä–µ–∑ –≤—ã–≥–æ–¥—É)
```
code: ask_phone_avito_benefit
type: text
purpose: get_phone
channels: ["avito"]
content: "–û—Å—Ç–∞–≤—å—Ç–µ –Ω–æ–º–µ—Ä ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Å–∫–∏–¥–∫—É 10% –Ω–∞ –ø–µ—Ä–≤—ã–π —Ä–µ–º–æ–Ω—Ç!"
```

#### get_whatsapp ‚Äî –ê–≤–∏—Ç–æ
```
code: ask_whatsapp_avito
type: text
purpose: get_whatsapp
channels: ["avito"]
content: "–§–æ—Ç–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —É–¥–æ–±–Ω–µ–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ WhatsApp. –ù–∞–ø–∏—à–∏—Ç–µ –Ω–æ–º–µ—Ä ‚Äî —Å–∫–∏–Ω—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –º–∞—Å—Ç–µ—Ä–∞."
```

#### get_telegram ‚Äî –ê–≤–∏—Ç–æ
```
code: ask_telegram_avito
type: text
purpose: get_telegram
channels: ["avito"]
content: "–ï—Å—Ç—å Telegram? –¢–∞–º —É–¥–æ–±–Ω–µ–µ ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ @username –∏–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞."
```

#### get_fingerprint ‚Äî –ê–≤–∏—Ç–æ
```
code: link_prices_avito
type: text
purpose: get_fingerprint
channels: ["avito"]
content: "–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –Ω–∞ —Ä–µ–º–æ–Ω—Ç {{device}}: {{short_link}}"
```

### 2. –°—Å—ã–ª–∫–∏ (Short Links)

#### –ü—Ä–∞–π—Å-–ª–∏—Å—Ç
```
code: link_prices
type: link
purpose: get_fingerprint
target_url: "https://eldoleado.ru/prices?device={{device}}"
channels: ["avito", "telegram", "whatsapp", "vk"]
```

#### –ê–¥—Ä–µ—Å –∏ —Å—Ö–µ–º–∞ –ø—Ä–æ–µ–∑–¥–∞
```
code: link_address
type: link
purpose: get_fingerprint
target_url: "https://eldoleado.ru/contacts"
channels: ["avito", "telegram", "whatsapp"]
```

#### –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏
```
code: link_status
type: link
purpose: get_fingerprint
target_url: "https://eldoleado.ru/status/{{appeal_id}}"
channels: ["avito", "telegram", "whatsapp", "sms"]
```

#### –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
```
code: link_feedback_form
type: link
purpose: get_email
target_url: "https://eldoleado.ru/feedback?client={{client_id}}"
channels: ["avito", "telegram", "whatsapp", "sms"]
```

### 3. –§–æ—Ä–º—ã

#### –ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞ –¥–ª—è —Å–≤—è–∑–∏
```
code: form_contact_choice
type: form
purpose: get_phone
fields: [
  {"name": "contact_method", "type": "radio", "options": ["WhatsApp", "Telegram", "SMS", "–ó–≤–æ–Ω–æ–∫"]},
  {"name": "contact_value", "type": "text", "placeholder": "–ù–æ–º–µ—Ä –∏–ª–∏ @username"}
]
```

#### –ó–∞–ø—Ä–æ—Å email –¥–ª—è —á–µ–∫–∞
```
code: form_receipt_email
type: form
purpose: get_email
fields: [
  {"name": "email", "type": "email", "placeholder": "email@example.com", "required": true}
]
trigger: "after_payment"
```

### 4. –°—Ç—Ä–∞–Ω–∏—Ü—ã (–ª–µ–Ω–¥–∏–Ω–≥–∏)

#### –í—ã–±–æ—Ä –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞
```
code: page_messenger_choice
type: page
purpose: get_telegram
url: "/connect/{{client_id}}"
description: "–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏: WhatsApp, Telegram, VK ‚Äî –∫–ª–∏–µ–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–±"
```

#### –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏
```
code: page_appeal_status
type: page
purpose: get_fingerprint
url: "/status/{{appeal_id}}"
description: "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å + —Ñ–æ—Ä–º–∞ '–£–≤–µ–¥–æ–º–∏—Ç—å –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏' —Å –≤—ã–±–æ—Ä–æ–º –∫–∞–Ω–∞–ª–∞"
```

### 5. –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

#### –ó–≤–æ–Ω–æ–∫ ‚Äî –∑–∞–ø—Ä–æ—Å WhatsApp
```
code: script_call_ask_whatsapp
type: script
purpose: get_whatsapp
channels: ["phone"]
content: |
  –ü–æ—Å–ª–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è:
  "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å —Ñ–æ—Ç–æ —É–¥–æ–±–Ω–µ–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ WhatsApp.
  –≠—Ç–æ—Ç –Ω–æ–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ WhatsApp –∏–ª–∏ –ø—Ä–æ–¥–∏–∫—Ç—É–µ—Ç–µ –¥—Ä—É–≥–æ–π?"

  –ï—Å–ª–∏ –¥–∞: –∑–∞–ø–∏—Å–∞—Ç—å –∫–∞–∫ whatsapp = —Ç–µ–∫—É—â–∏–π –Ω–æ–º–µ—Ä
  –ï—Å–ª–∏ –¥—Ä—É–≥–æ–π: –∑–∞–ø–∏—Å–∞—Ç—å –Ω–æ–≤—ã–π –Ω–æ–º–µ—Ä –∫–∞–∫ whatsapp
```

#### –ó–≤–æ–Ω–æ–∫ ‚Äî –ø–µ—Ä–µ–≤–æ–¥ –≤ Telegram
```
code: script_call_to_telegram
type: script
purpose: get_telegram
channels: ["phone"]
content: |
  "–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–º–æ–Ω—Ç–∞ —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à Telegram-–±–æ—Ç.
  –ö–∞–∫ –≤–∞—Å –Ω–∞–π—Ç–∏ –≤ Telegram ‚Äî –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –µ—Å—Ç—å username?"
```

---

## –¶–µ–ø–æ—á–∫–∏ –æ–±–æ–≥–∞—â–µ–Ω–∏—è

### Avito ‚Üí –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å

```
1. Avito chat (avito_user_id)
   ‚Üì [–∫—Ä–µ–∞—Ç–∏–≤: ask_phone_avito_friendly]
2. Phone (+79...)
   ‚Üì [–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–±—É–µ–º WA]
3. WhatsApp (—Ç–æ—Ç –∂–µ –Ω–æ–º–µ—Ä, –µ—Å–ª–∏ –µ—Å—Ç—å)
   ‚Üì [short_link –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏]
4. Fingerprint (–ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Å–∞–π—Ç)
   ‚Üì [—Ñ–æ—Ä–º–∞ –Ω–∞ —Å–∞–π—Ç–µ]
5. Email (–µ—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç)
```

### –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ ‚Üí –ú—É–ª—å—Ç–∏–∫–∞–Ω–∞–ª

```
1. Phone (caller_id)
   ‚Üì [—Å–∫—Ä–∏–ø—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞]
2. WhatsApp (—Å–ø—Ä–∞—à–∏–≤–∞–µ–º "—ç—Ç–æ—Ç –Ω–æ–º–µ—Ä –≤ WA?")
   ‚Üì [–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É]
3. Fingerprint
   ‚Üì [–≤ WA –ø—Ä–æ—Å–∏–º TG]
4. Telegram (username)
```

### –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã ‚Üí –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```
1. –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã (–∞–Ω–æ–Ω–∏–º–Ω–æ)
   ‚Üì [–∫–ª–∏–∫ –Ω–∞ —Å–∞–π—Ç]
2. Fingerprint (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
   ‚Üì [—Ñ–æ—Ä–º–∞ "–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É"]
3. Phone + –∏–º—è
   ‚Üì [—Å–≤—è–∑—ã–≤–∞–µ–º fingerprint —Å –∫–ª–∏–µ–Ω—Ç–æ–º]
4. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤–∏–∑–∏—Ç–µ ‚Äî —É–∑–Ω–∞—ë–º –∫–ª–∏–µ–Ω—Ç–∞
```

---

## –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞–Ω–∞–ª–∞–º

```sql
SELECT
  discovered_channel,
  COUNT(*) as total_contacts,
  COUNT(CASE WHEN is_verified THEN 1 END) as verified,
  COUNT(DISTINCT client_id) as unique_clients
FROM contacts c
JOIN client_contacts cc ON cc.contact_id = c.id
GROUP BY discovered_channel
ORDER BY total_contacts DESC;
```

### –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∫—Ä–µ–∞—Ç–∏–≤–æ–≤

```sql
SELECT
  cr.code,
  cr.name,
  cr.usage_count,
  cr.success_count,
  ROUND(cr.success_rate * 100, 1) as success_rate_pct
FROM creatives cr
WHERE cr.is_active = TRUE
ORDER BY cr.success_rate DESC;
```

### A/B —Ç–µ—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

```sql
SELECT
  t.name as test_name,
  r.variant,
  COUNT(*) as exposures,
  COUNT(CASE WHEN r.converted THEN 1 END) as conversions,
  ROUND(COUNT(CASE WHEN r.converted THEN 1 END)::NUMERIC / COUNT(*) * 100, 2) as rate
FROM ab_tests t
JOIN ab_test_results r ON r.ab_test_id = t.id
WHERE t.status = 'running'
GROUP BY t.name, r.variant
ORDER BY t.name, r.variant;
```

### –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å enrichment

```sql
SELECT
  ea.target_contact_type,
  ea.method,
  ea.channel,
  COUNT(*) as attempts,
  COUNT(CASE WHEN ea.status = 'success' THEN 1 END) as successes,
  ROUND(COUNT(CASE WHEN ea.status = 'success' THEN 1 END)::NUMERIC / COUNT(*) * 100, 1) as rate
FROM enrichment_actions ea
GROUP BY ea.target_contact_type, ea.method, ea.channel
ORDER BY rate DESC;
```

---

## –ë—É–¥—É—â–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–µ–∞—Ç–∏–≤–∞–º–∏:
- CRUD –¥–ª—è –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ —Å preview
- –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —à–∞–±–ª–æ–Ω–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ A/B —Ç–µ—Å—Ç–∞–º–∏
- –î–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:
- –ê–≤—Ç–æ-–≤—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ –∫—Ä–µ–∞—Ç–∏–≤–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ ML
- –ê–≤—Ç–æ-–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–∏–≥—Ä—ã—à–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º –∫–ª–∏–µ–Ω—Ç–æ–≤

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∫–ª–∞–º–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (VK Ads, –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç)
- –†–µ—Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥ –ø–æ fingerprint
- Look-alike –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±–æ–≥–∞—â—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
